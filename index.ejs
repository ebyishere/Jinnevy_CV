<!DOCTYPE html>
<html>
<head>
  <title>My E-Portfolio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/css/style.css">
  <style>
    .section { margin-bottom: 50px; }
    .skill-bar { height: 20px; margin-bottom: 10px; }
    @media print {
      nav, .btn { display: none; }
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="#">My E-Portfolio</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#personal">Personal Info</a></li>
        <li class="nav-item"><a class="nav-link" href="#education">Education</a></li>
        <li class="nav-item"><a class="nav-link" href="#work">Work</a></li>
        <li class="nav-item"><a class="nav-link" href="#skills">Skills</a></li>
        <li class="nav-item"><a class="nav-link" href="#awards">Awards</a></li>
        <li class="nav-item"><a class="nav-link" href="#references">References</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-4">

  <!-- Header with photo -->
  <div class="profile-header">
    <img src="/images/profile.jpg" alt="Profile Photo">
  </div>

  <!-- PERSONAL INFO -->
  <div id="personal" class="section">
    <h2>Personal Information</h2>
    <% if(data.personal.length > 0){ let p = data.personal[0]; %>
      <p><strong>Name:</strong> <%= p.full_name %></p>
      <p><strong>Email:</strong> <%= p.email %></p>
      <p><strong>Phone:</strong> <%= p.phone %></p>
      <p><strong>Address:</strong> <%= p.address %></p>
    <% } %>
  </div>

  <!-- PROFESSIONAL OBJECTIVE -->
  <div id="objective" class="section">
    <h2>Professional Objective</h2>
    <% if(data.objective.length > 0){ %>
      <p><%= data.objective[0].description %></p>
    <% } %>
  </div>

  <!-- EDUCATION -->
  <div id="education" class="section">
    <h2>Education</h2>
    <% data.education.forEach(e => { %>
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title"><%= e.qualification %></h5>
          <h6 class="text-muted"><%= e.institution %></h6>
          <p><%= e.start_year %> - <%= e.end_year %></p>
          <p><%= e.description %></p>
        </div>
      </div>
    <% }) %>
  </div>

  <!-- WORK EXPERIENCE -->
  <div id="work" class="section">
    <h2>Related Experience</h2>
    <% data.work.forEach(w => { %>
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title"><%= w.position %></h5>
          <p><%= w.start_date %> - <%= w.end_date %></p>
          <p><%= w.description %></p>
        </div>
      </div>
    <% }) %>
  </div>

  <!-- SKILLS -->
  <div id="skills" class="section">
    <h2>Skills</h2>
    <% data.skills.forEach(s => { %>
      <p><%= s.skill_name %> - <%= s.skill_level %></p>
      <div class="progress skill-bar">
        <div class="progress-bar" style="width:<%= s.skill_level %>%"></div>
      </div>
    <% }) %>
  </div>

  <!-- AWARDS -->
  <div id="awards" class="section">
    <h2>Awards & Honours</h2>
    <% data.awards.forEach(a => { %>
      <p><strong><%= a.title %></strong> (<%= a.year %>): <%= a.description %></p>
    <% }) %>
  </div>

  <!-- REFERENCES -->
  <div id="references" class="section">
    <h2>References</h2>
    <% data.references.forEach(r => { %>
      <p><strong><%= r.name %></strong> | Email: <%= r.email %> | Phone: <%= r.phone %></p>
    <% }) %>
  </div>

  <!-- PRINT BUTTON -->
  <button class="btn btn-success mb-5" onclick="window.print()">Print CV</button>

</div>

</body>
</html>
